fi <- rgb(one[,1],one[,2],one[,3])
se <- rgb(two[,1],two[,2],two[,3])
thr <- rgb(thre[,1],thre[,2],thre[,3])
fr <- rgb(fo[,1],fo[,2],fo[,3])
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
par(oma = rep(0.01,4))
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste(sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext('获胜者',ps,side = 3,
cex=1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=1)
}
} ,movie.name="electionX.gif",
interval = 2)
library(maps)
library(animation)
library(magrittr)
library(viridis)
library(dplyr)
library(readr)
election <- read_csv("E:/elections.csv") #读入数据
election$sharedem <- election$dem/(election$rep+election$dem+election$other)
election$sharerep <- election$rep/(election$rep+election$dem+election$other)
data(viridis.map)
viridis.map <- viridis.map %>%
filter(opt=='C')
coldt <- viridis.map[election$sharerep*250,] %>%
select(-opt)
election$county.col <- rgb(coldt[,1],coldt[,2],coldt[,3])
one <- viridis.map[0.125*250,]
two <- viridis.map[0.375*250,]
thre <- viridis.map[0.625*250,]
fo <- viridis.map[0.875*250,]
fi <- rgb(one[,1],one[,2],one[,3])
se <- rgb(two[,1],two[,2],two[,3])
thr <- rgb(thre[,1],thre[,2],thre[,3])
fr <- rgb(fo[,1],fo[,2],fo[,3])
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
par(oma = rep(0.01,4))
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste(sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext('获胜者',ps,side = 1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例")
}
} ,movie.name="electionX.gif",
interval = 2)
library(maps)
library(animation)
library(magrittr)
library(viridis)
library(dplyr)
library(readr)
election <- read_csv("E:/elections.csv") #读入数据
election$sharedem <- election$dem/(election$rep+election$dem+election$other)
election$sharerep <- election$rep/(election$rep+election$dem+election$other)
data(viridis.map)
viridis.map <- viridis.map %>%
filter(opt=='C')
coldt <- viridis.map[election$sharerep*250,] %>%
select(-opt)
election$county.col <- rgb(coldt[,1],coldt[,2],coldt[,3])
one <- viridis.map[0.125*250,]
two <- viridis.map[0.375*250,]
thre <- viridis.map[0.625*250,]
fo <- viridis.map[0.875*250,]
fi <- rgb(one[,1],one[,2],one[,3])
se <- rgb(two[,1],two[,2],two[,3])
thr <- rgb(thre[,1],thre[,2],thre[,3])
fr <- rgb(fo[,1],fo[,2],fo[,3])
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
par(oma = rep(0.01,4))
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste(sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext('获胜者',ps,side = 1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例")
}
} ,movie.name="electionX.gif",
interval = 2)
library(maps)
library(animation)
library(magrittr)
library(viridis)
library(dplyr)
library(readr)
election <- read_csv("E:/elections.csv") #读入数据
election$sharedem <- election$dem/(election$rep+election$dem+election$other)
election$sharerep <- election$rep/(election$rep+election$dem+election$other)
data(viridis.map)
viridis.map <- viridis.map %>%
filter(opt=='C')
coldt <- viridis.map[election$sharerep*250,] %>%
select(-opt)
election$county.col <- rgb(coldt[,1],coldt[,2],coldt[,3])
one <- viridis.map[0.125*250,]
two <- viridis.map[0.375*250,]
thre <- viridis.map[0.625*250,]
fo <- viridis.map[0.875*250,]
fi <- rgb(one[,1],one[,2],one[,3])
se <- rgb(two[,1],two[,2],two[,3])
thr <- rgb(thre[,1],thre[,2],thre[,3])
fr <- rgb(fo[,1],fo[,2],fo[,3])
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
par(oma = rep(0.01,4))
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste(sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext('获胜者',ps,side = 1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=1)
}
} ,movie.name="electionX.gif",
interval = 2)
library(maps)
library(animation)
library(magrittr)
library(viridis)
library(dplyr)
library(readr)
election <- read_csv("E:/elections.csv") #读入数据
election$sharedem <- election$dem/(election$rep+election$dem+election$other)
election$sharerep <- election$rep/(election$rep+election$dem+election$other)
data(viridis.map)
viridis.map <- viridis.map %>%
filter(opt=='C')
coldt <- viridis.map[election$sharerep*250,] %>%
select(-opt)
election$county.col <- rgb(coldt[,1],coldt[,2],coldt[,3])
one <- viridis.map[0.125*250,]
two <- viridis.map[0.375*250,]
thre <- viridis.map[0.625*250,]
fo <- viridis.map[0.875*250,]
fi <- rgb(one[,1],one[,2],one[,3])
se <- rgb(two[,1],two[,2],two[,3])
thr <- rgb(thre[,1],thre[,2],thre[,3])
fr <- rgb(fo[,1],fo[,2],fo[,3])
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste(sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext('获胜者',ps,side = 1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=1)
}
} ,movie.name="electionX.gif",
interval = 2)
library(maps)
library(animation)
library(magrittr)
library(viridis)
library(dplyr)
library(readr)
election <- read_csv("E:/elections.csv") #读入数据
election$sharedem <- election$dem/(election$rep+election$dem+election$other)
election$sharerep <- election$rep/(election$rep+election$dem+election$other)
data(viridis.map)
viridis.map <- viridis.map %>%
filter(opt=='C')
coldt <- viridis.map[election$sharerep*250,] %>%
select(-opt)
election$county.col <- rgb(coldt[,1],coldt[,2],coldt[,3])
one <- viridis.map[0.125*250,]
two <- viridis.map[0.375*250,]
thre <- viridis.map[0.625*250,]
fo <- viridis.map[0.875*250,]
fi <- rgb(one[,1],one[,2],one[,3])
se <- rgb(two[,1],two[,2],two[,3])
thr <- rgb(thre[,1],thre[,2],thre[,3])
fr <- rgb(fo[,1],fo[,2],fo[,3])
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=1)
}
} ,movie.name="electionX.gif",
interval = 2)
library(maps)
library(animation)
library(magrittr)
library(viridis)
library(dplyr)
library(readr)
election <- read_csv("E:/elections.csv") #读入数据
election$sharedem <- election$dem/(election$rep+election$dem+election$other)
election$sharerep <- election$rep/(election$rep+election$dem+election$other)
data(viridis.map)
viridis.map <- viridis.map %>%
filter(opt=='C')
coldt <- viridis.map[election$sharerep*250,] %>%
select(-opt)
election$county.col <- rgb(coldt[,1],coldt[,2],coldt[,3])
one <- viridis.map[0.125*250,]
two <- viridis.map[0.375*250,]
thre <- viridis.map[0.625*250,]
fo <- viridis.map[0.875*250,]
fi <- rgb(one[,1],one[,2],one[,3])
se <- rgb(two[,1],two[,2],two[,3])
thr <- rgb(thre[,1],thre[,2],thre[,3])
fr <- rgb(fo[,1],fo[,2],fo[,3])
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.86)
}
} ,movie.name="electionX.gif",
interval = 2)
library(maps)
library(animation)
library(magrittr)
library(viridis)
library(dplyr)
library(readr)
election <- read_csv("E:/elections.csv") #读入数据
election$sharedem <- election$dem/(election$rep+election$dem+election$other)
election$sharerep <- election$rep/(election$rep+election$dem+election$other)
data(viridis.map)
viridis.map <- viridis.map %>%
filter(opt=='C')
coldt <- viridis.map[election$sharerep*250,] %>%
select(-opt)
election$county.col <- rgb(coldt[,1],coldt[,2],coldt[,3])
one <- viridis.map[0.125*250,]
two <- viridis.map[0.375*250,]
thre <- viridis.map[0.625*250,]
fo <- viridis.map[0.875*250,]
fi <- rgb(one[,1],one[,2],one[,3])
se <- rgb(two[,1],two[,2],two[,3])
thr <- rgb(thre[,1],thre[,2],thre[,3])
fr <- rgb(fo[,1],fo[,2],fo[,3])
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.89)
}
} ,movie.name="electionX.gif",
interval = 2)
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1,cex=1.1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.88)
}
} ,movie.name="electionX.gif",
interval = 2)
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit,cex=1.1) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1,cex=1.1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.88)
}
} ,movie.name="electionX.gif",
interval = 2)
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit,cex=1.3) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1,cex=1.1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.88)
}
} ,movie.name="electionX.gif",
interval = 2)
?title
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit,cex.main=1.3) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1,cex=1.1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.88)
}
} ,movie.name="electionX.gif",
interval = 2)
library(readr)
president <- read_csv("president.csv",
locale = locale(encoding = "GB2312")) %>%
as.data.frame()
colors = c(fi,se,thr, fr)
setwd('C:/Users/xsong/Desktop/table') # 设置导出gif的路径
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit,sub='宋骁',cex.main=1.3) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1,cex=1.1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.88)
}
} ,movie.name="electionX.gif",
interval = 2)
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit,cex.main=1.3) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1,cex=1.1)
mtext('宋骁',side = 3)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.88)
}
} ,movie.name="electionX.gif",
interval = 2)
saveGIF({
for (i in seq(1960,2012,4)){         # 1960-2012 循环 步长4   2008election格式
thisyear <- subset(election,year == i) # 得到对应年份数据
map(database = "county",  # 按对应年份数据画图
col = thisyear$county.col,
fill = T)
tit <- paste('历届美国总统选举:',i,'年') # 得到相应年份的标题
title(tit,cex.main=1.3) # 加入标题
sub <- subset(president,year == i)
ps <- paste('获胜者:',sub[ ,2], sub[ ,3]) # 得到相应年份的标题
mtext(ps,side = 1,cex=1.1)
leg.txt <- c("0-25%", "25-50%", "50-75%", "75-100%")
legend("bottomright", leg.txt,
fill = colors,title= "共和党得票比例",
cex=0.88)
}
} ,movie.name="electionX.gif",
interval = 2)
setwd('D:/sec_site')
blogdown::new_site()
blogdown:::stop_server()
setwd('F:/Mysite')
blogdown:::serve_site()
blogdown:::stop_server()
library(rvest)
library(magrittr)
kodak <- read_html("https://search.bilibili.com/all?keyword=%E6%AF%92%E6%B6%B2&from_source=nav_search&spm_id_from=333.788.b_62696c692d6865616465722d6d.11")
kodak %>%
html_nodes(.,'.title') %>%
html_text()
kodak %>%
html_nodes(.,'.up-name') %>%
html_text()
magrittr
rm(list = ls())
is.data.frame()
