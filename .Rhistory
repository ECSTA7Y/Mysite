#install.packages("maps")
#library(maps)
#map()
#install.packages("tibble")
#install.packages("mapproj")
#plot(china_map)
rm(list=ls())
library(haven)
china_map_data <- read_dta("E:/R_codes/maps/nomissing/chnprovcd.dta")
library(dplyr)
library(plyr)
# prepare work data, which needed to be filled in the map
library(readxl)
mapdata <- read_excel("E:/land/plot/geodata0131.xlsx")
mapdata <- as.data.frame(mapdata)
mapdata <- select(mapdata,-(NAME)) #reverse selection
china_data <- join(china_map_data, mapdata, type="full")
library(ggplot2)
out12 <- ggplot(china_data, aes(x = long, y = lat, group = group,fill= out12)) +
geom_polygon(colour="brown",size=0.2) +
scale_fill_gradientn(colours = c("yellow", "red"),na.value = "white",
breaks = c(10,20,30,40),limits=c(0,43), guide = "legend") +
coord_map("polyconic") +
theme(
panel.grid = element_blank(),
panel.background = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
legend.position = "none",
plot.title = element_text(hjust = 0.5,vjust=0.9, size=11),
legend.title = element_text(size=0),
plot.margin = unit(c(0.001,0.001,0.001,0.001), "cm"))
in12 <- ggplot(china_data, aes(x = long, y = lat, group = group,fill= in12)) +
geom_polygon(colour="brown",size=0.2) +
scale_fill_gradientn(colours = c("yellow", "red"),na.value = "white",
breaks = c(10,20,30,40),limits=c(0,43), guide = "legend") +
coord_map("polyconic") +
theme(
panel.grid = element_blank(),
panel.background = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
legend.position = "none",
plot.title = element_text(hjust = 0.5,vjust=0.9, size=11),
legend.title = element_text(size=0),
plot.margin = unit(c(0.001,0.001,0.001,0.001), "cm"))
out14 <- ggplot(china_data, aes(x = long, y = lat, group = group,fill= out14)) +
geom_polygon(colour="brown",size=0.2) +
scale_fill_gradientn(colours = c("yellow", "red"),na.value = "white",
breaks = c(10,20,30,40),limits=c(0,43), guide = "legend") +
coord_map("polyconic") +
theme(
panel.grid = element_blank(),
panel.background = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
legend.position = "none",
plot.title = element_text(hjust = 0.5,vjust=0.9, size=11),
legend.title = element_text(size=0),
plot.margin = unit(c(0.001,0.001,0.001,0.001), "cm"))
in14 <- ggplot(china_data, aes(x = long, y = lat, group = group,fill= in14)) +
geom_polygon(colour="brown",size=0.2) +
scale_fill_gradientn(colours = c("yellow", "red"),na.value = "white",
breaks = c(10,20,30,40),limits=c(0,43), guide = "legend") +
coord_map("polyconic") +
theme(
panel.grid = element_blank(),
panel.background = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
legend.position = c(0.9,0.6),
plot.title = element_text(hjust = 0.5,vjust=0.9, size=11),
legend.title = element_text(size=0),
plot.margin = unit(c(0.001,0.001,0.001,0.001), "cm"))
out16 <- ggplot(china_data, aes(x = long, y = lat, group = group,fill= out16)) +
geom_polygon(colour="brown",size=0.2) +
scale_fill_gradientn(colours = c("yellow", "red"),na.value = "white",
breaks = c(10,20,30,40),limits=c(0,43), guide = "legend") +
coord_map("polyconic") +
theme(
panel.grid = element_blank(),
panel.background = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
legend.position = "none",
plot.title = element_text(hjust = 0.5,vjust=0.9, size=11),
legend.title = element_text(size=0),
plot.margin = unit(c(0.001,0.001,0.001,0.001), "cm"))
in16 <- ggplot(china_data, aes(x = long, y = lat, group = group,fill= in16)) +
geom_polygon(colour="brown",size=0.2) +
scale_fill_gradientn(colours = c("yellow", "red"),na.value = "white",
breaks = c(10,20,30,40),limits=c(0,43), guide = "legend") +
coord_map("polyconic") +
theme(
panel.grid = element_blank(),
panel.background = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
legend.position = "none",
plot.title = element_text(hjust = 0.5,vjust=0.9, size=11),
legend.title = element_text(size=0),
plot.margin = unit(c(0.001,0.001,0.001,0.001), "cm"))
#library(devtools)
#install_local("C:/Users/lenovo/Desktop/easyGgplot2-master.zip")
library(easyGgplot2)
multiplot <- ggplot2.multiplot(out12,in12,out14,in14,out16,in16, cols=2)
multiplot
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
