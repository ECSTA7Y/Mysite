matrix(rnorm(100),ncol = 2)
?geom_abline
??geom_abline
??data_grid
library(glmnet)
?glmnet
library(haven)
library(ggplot2)
library(dplyr)
library(rpart)
library(rpart.plot)
library(pROC)
library(tidyr)
library(randomForest)
library(missForest)
`%>%` <- magrittr::`%>%`
library(mice)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
y_train <- ceps %>%
select(sdtotal) %>%
unlist() %>%
as.numeric()
lasso_mod <-  glmnet(x_train,
y_train,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=F,ylab='系数')
lasso_mod
coef(lasso_mod)
cof <- coef(lasso_mod)
View(cof)
cof@p
coef(lasso_mod,s=0.1)
coef(lasso_mod,s=1)
coef(lasso_mod,s=0.001)
?coef
?cv.glmnet
cvfit <- cv.glmnet(x_train,
y_train,
alpha = 1)
cvfit
plot(cvfit)
cvfit$lambda.min
cvfit$lambda.1se
#options(na.action="na.fail")
library(glmnet)
?glmnet
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
library(haven)
library(ggplot2)
library(dplyr)
library(rpart)
library(rpart.plot)
library(pROC)
library(tidyr)
library(randomForest)
library(missForest)
`%>%` <- magrittr::`%>%`
library(mice)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
library(glmnet)
as.matrix(ceps)
cepsmat <- ceps %>%
select(sdtotal,schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
View(cepsmat)
y_train <- cepsmat %>%
select(sdtotal) %>%
unlist() %>%
as.numeric()
y_train <- cepsmat %>%
select(sdtotal)
sdtotal <- cepsmat$sdtotal
sdtotal <- as.matrix(ceps$sdtotal)
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=F,ylab='系数')
lasso_mod
cof <- coef(lasso_mod)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
rm(list=ls())
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
library(haven)
library(ggplot2)
library(dplyr)
library(rpart)
library(rpart.plot)
library(pROC)
library(tidyr)
library(randomForest)
library(missForest)
`%>%` <- magrittr::`%>%`
library(mice)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
？glmnet
?glmnet
cepsmat <- ceps %>%
select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
lasso_mod <- glmnet(cepsmat,
ceps$sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
lbs_fun <- function(fit, ...) {
L <- length(fit$lambda)
x <- log(fit$lambda[L])
y <- fit$beta[, L]
labs <- names(y)
text(x, y, labels=labs, ...)
}
lbs_fun(lasso_mod)
plot(lasso_mod,xvar="lambda",label=F,ylab='系数')
lbs_fun(lasso_mod)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod)
install.packages('plotmo')
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod)
? plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
cepsmat <- ceps %>%
select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
lasso_mod <- glmnet(cepsmat,
ceps$sdtotal,
alpha = 1)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
cepsmat <- ceps %>%
select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix() %>%
na.omit()
#sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
ceps$sdtotal,
alpha = 1)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
lasso_mod <- glmnet(cepsmat,
na.omit(ceps$sdtotal),
alpha = 1)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)
y_train <- x_train[,1]
x_train <- x_train[,-1]
lasso_mod <- glmnet(x_train,
y_train,
alpha = 1)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
y_train <- ceps %>%
select(sdtotal) %>%
unlist() %>%
as.numeric()
#cepsmat <- ceps %>%
# select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
#  as.matrix() %>%
#  na.omit()
#sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(x_train,
y_train,
alpha = 1)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
install.packages('svglite')
Sys.setlocale(, "Chinese")
shiny::runGitHub(“cardiomoon/ggplot2new”)
shiny::runGitHub("cardiomoon/ggplot2new")
shiny::runGitHub("cardiomoon/ggplot2new")
??sname_UI <- function(id) {
ns <- NS(id)
tagList(
)
}
name <- function(input, output, session) {
}
?name_UI <- function(id) {
ns <- NS(id)
tagList(
)
}
name <- function(input, output, session) {
}
shiny::runApp("C:/Users/xsong/Desktop/ggplot2new-master.zip")
library(devtools)
install_local("C:/Users/xsong/Desktop/ggplot2new-master.zip")
shiny::runApp("C:/Users/xsong/Desktop/ggplot2new-master/ggplot2new-master")
shiny::runApp("C:/Users/xsong/Desktop/ggplot2new-master/ggplot2new-master")
install_local("C:/Users/xsong/Desktop/ggplot2new-master.zip")
runApp("C:/Users/xsong/Desktop/ggplot2new-master/ggplot2new-master/ui.R")
runApp("C:/Users/xsong/Desktop/ggplot2new-master/ggplot2new-master/www")
library(shiny)
runApp("C:/Users/xsong/Desktop/ggplot2new-master/ggplot2new-master/www")
runApp("C:/Users/xsong/Desktop/ggplot2new-master/ggplot2new-master")
install.packages('ggThemeAssist')
library(ggThemeAssist)
bar1 <- read_csv("F:/Mysite/Mysite/static/slides/mlepre/bar1.csv")
library(ggplot2)
library(dplyr)
library(plyr)
library(readxl)
library(modelr)
library(readr)
library(easyGgplot2)
library(reshape2)
library(rgdal)
`%>%` <- magrittr::`%>%`
bar1 <- read_csv("F:/Mysite/Mysite/static/slides/mlepre/bar1.csv")
cc <- ggplot(bar1,aes(reorder(car
,value),value,color=segment
,fill=segment
)) +
geom_bar(stat = 'identity',width = 0.3) +
coord_flip()+
geom_text(aes(label = value,position='right',hjust=0.8),size=2.7,color='black') +
facet_grid(phase~segment,space = "free_x") +
labs(x=" ",y=" ") +
theme_classic() +
theme(legend.position='none')
ggThemeAssist::ggThemeAssistGadget(cc)
browseVignettes('glmnet')
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
blogdown:::stop_server()
blogdown:::stop_server()
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
blogdown:::stop_server()
blogdown:::stop_server()
install.packages('xgboost')
stu <- read_dta("E:/edu/data/stu.dta")
`%>%` <- magrittr::`%>%`
library(haven)
library(dplyr)
require(stats)
library(ggplot2)
library(rpart)
library(rpart.plot)
library(foreign)
stu <- read_dta("E:/edu/data/stu.dta")
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass)
?replace
?recode
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(sex=a01,onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(sex,1='male',2='female'),
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(sex=a01,onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(sex,1= 'male',2= 'female'),
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(sex=a01,onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(sex, 1 = 'male', 2= 'female'),
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(sex=a01,onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(sex, 1 = 'male', 2= 'female'),
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(sex=a01,onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31)
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(sex=a01,onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(sex, 1 = 'male', 2= 'female'))
View(stu)
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(a01, 1 = 'male', 2 ='female'))
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(a01, 1= 'male', 2='female'))
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode_factor(a01, 1= 'male', 2='female'))
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode_factor(a01, '1'= 'male', '2'='female'))
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(onech=b01,maedu=b06,faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(a01,'1'= 'male', '2'='female'))
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,1=0,2=6,3=9,c(4,5,6)=12))
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,'1'=0,'2'=6,'3'=9,c('4','5','6')=12))
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,'1'=0,'2'=6,'3'=9))
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,'1'=0,'2'=6,'3'=9,'4'|'5'|'6'=12))
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(faedu=b07,drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,'1'=0,'2'=6,'3'=9,'4'=12,'5'=12,'6'=12,'7'=15,'8'=16,'9'=19))
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
transmute(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,'1'=0,'2'=6,'3'=9,'4'=12,'5'=12,'6'=12,'7'=15,'8'=16,'9'=19)),
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
transmute(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,'1'=0,'2'=6,'3'=9,'4'=12,'5'=12,'6'=12,'7'=15,'8'=16,'9'=19)),
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
transmute(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,'1'=0,'2'=6,'3'=9,'4'=12,'5'=12,'6'=12,'7'=15,'8'=16,'9'=19),
faedu=recode(b07,'1'=0,'2'=6,'3'=9,'4'=12,'5'=12,'6'=12,'7'=15,'8'=16,'9'=19))
student <- read_dta("E:/edu/data/stu.dta")
stu <- student %>%
lapply(unclass) %>%
data.frame() %>%
select(ids, grade9, clsids, schids, tr_chn, tr_mat, tr_eng, stdchn, stdmat,stdeng,a01, b01, b06, b07, b1001, b1002, b1003, b11, b13, b27, b2201, b2202, b31,sweight) %>%
rename(drunk=b1001,qurel=b1002, relation=b1003,desk=b11,net=b13,dialect=b27, chkhmwk=b2201,chkcouse=b2202,eduexp=b31) %>%
mutate_at(sex=recode(a01,'1'= 'male', '2'='female'),
onechi=recode(b01,'1'='yes','2'='no'),
maedu=recode(b06,'1'=0,'2'=6,'3'=9,'4'=12,'5'=12,'6'=12,'7'=15,'8'=16,'9'=19),
faedu=recode(b07,'1'=0,'2'=6,'3'=9,'4'=12,'5'=12,'6'=12,'7'=15,'8'=16,'9'=19))
