library(readr)
`%>%` <- magrittr::`%>%`
library(tidyr)
salary <- read_csv("E:/R_codes/others/nba/NBA_season1718_salary.csv")
Seasons <- read_csv("E:/R_codes/others/nba/Seasons_Stats.csv")
Seasons <- Seasons %>%
drop_na(Age,Player)
sqldf(
"SELECT DISTINCT Player,Age from Seasons;
"
)
ses <- sqldf(
"SELECT DISTINCT Player,Age from Seasons;
"
)
View(ses)
summary(ses$Age)
View(`%>%`)
max(ses$Age)
??glmnet
library(glmnet)
install.packages('glmnet')
library(glmnet)
?glmnet
?foreach
library(sqldf)
library(readr)
`%>%` <- magrittr::`%>%`
library(tidyr)
salary <- read_csv("E:/R_codes/others/nba/NBA_season1718_salary.csv")
Seasons <- read_csv("E:/R_codes/others/nba/Seasons_Stats.csv")
#Seasons <- Seasons %>%
# drop_na(Age,Player)
head(sqldf(
"UPDATE salary SET salary17_18 = salary17_18/1000000 "
),n=10)
View(salary)
head(sqldf(
"UPDATE salary SET salary17_18 = season17_18/1000000"
),n=10)
head(sqldf(
"INSERT INTO salary salary17_18;
UPDATE salary SET salary17_18 = season17_18/1000000"
),n=10)
head(sqldf(
"INSERT INTO salary (salary17_18) ;
UPDATE salary SET salary17_18 = season17_18/1000000"
),n=10)
head(sqldf(
"INSERT INTO salary (salary17_18)
UPDATE salary SET salary17_18 = season17_18/1000000"
),n=10)
head(sqldf(
"INSERT INTO salary (salary17_18) VALUES (None);
UPDATE salary SET salary17_18 = season17_18/1000000"
),n=10)
head(sqldf(
"INSERT INTO salary (salary17_18) VALUES (None);
"
),n=10)
head(sqldf(
"ALTER TABLE salary salary17_18;
"
),n=10)
#UPDATE salary SET salary17_18 = season17_18/1000000
head(sqldf(
"ALTER TABLE salary salary17_18 FLOAT;
"
),n=10)
#UPDATE salary SET salary17_18 = season17_18/1000000
head(sqldf(
"ALTER TABLE salary ADD salary17_18 FLOAT;
"
),n=10)
#UPDATE salary SET salary17_18 = season17_18/1000000
head(sqldf(
"ALTER TABLE salary ADD salary17_18 FLOAT;
UPDATE salary SET salary17_18 = season17_18/1000000
"
),n=10)
#UPDATE salary SET salary17_18 = season17_18/1000000
head(sqldf(
"ALTER TABLE salary ADD salary17_18 FLOAT;
UPDATE salary SET salary17_18 = season17_18/1000000;
SELECT * FROM salary
"
),n=10)
#UPDATE salary SET salary17_18 = season17_18/1000000
head(sqldf(
"ALTER TABLE salary ADD salary17_18 FLOAT;
SELECT * FROM salary;
"
),n=10)
#UPDATE salary SET salary17_18 = season17_18/1000000
head(sqldf(
"ALTER TABLE salary ADD salary17_18 FLOAT
SELECT * FROM salary;
"
),n=10)
#UPDATE salary SET salary17_18 = season17_18/1000000
head(salary <- sqldf(
"ALTER TABLE salary ADD salary17_18 FLOAT;
"
),n=10)
#UPDATE salary SET salary17_18 = season17_18/1000000
#SELECT * FROM salary
#UPDATE salary SET salary17_18 = season17_18/1000000
View(salary)
library(sqldf)
library(readr)
`%>%` <- magrittr::`%>%`
library(tidyr)
salary <- read_csv("E:/R_codes/others/nba/NBA_season1718_salary.csv")
Seasons <- read_csv("E:/R_codes/others/nba/Seasons_Stats.csv")
#Seasons <- Seasons %>%
# drop_na(Age,Player)
salary <- sqldf(
"ALTER TABLE salary ADD salary17_18 FLOAT;
",row.names=T)
#UPDATE salary SET salary17_18 = season17_18/1000000
#SELECT * FROM salary
#UPDATE salary SET salary17_18 = season17_18/1000000
library(sqldf)
library(readr)
`%>%` <- magrittr::`%>%`
library(tidyr)
salary <- read_csv("E:/R_codes/others/nba/NBA_season1718_salary.csv")
Seasons <- read_csv("E:/R_codes/others/nba/Seasons_Stats.csv")
#Seasons <- Seasons %>%
# drop_na(Age,Player)
salary <- sqldf(
"ALTER TABLE salary ADD salary17_18 FLOAT;
",row.names=T)
#UPDATE salary SET salary17_18 = season17_18/1000000
#SELECT * FROM salary
#UPDATE salary SET salary17_18 = season17_18/1000000
library(sqldf)
library(readr)
`%>%` <- magrittr::`%>%`
library(tidyr)
salary <- read_csv("E:/R_codes/others/nba/NBA_season1718_salary.csv")
Seasons <- read_csv("E:/R_codes/others/nba/Seasons_Stats.csv")
#Seasons <- Seasons %>%
# drop_na(Age,Player)
salary <- sqldf(
"ALTER TABLE salary
ADD salary17_18 FLOAT;
",row.names=T)
#UPDATE salary SET salary17_18 = season17_18/1000000
#SELECT * FROM salary
#UPDATE salary SET salary17_18 = season17_18/1000000
salary <- sqldf(
"ALTER TABLE salary ;
ADD salary17_18 FLOAT;
",row.names=T)
#UPDATE salary SET salary17_18 = season17_18/1000000
#SELECT * FROM salary
#UPDATE salary SET salary17_18 = season17_18/1000000
library(sqldf)
library(readr)
`%>%` <- magrittr::`%>%`
library(tidyr)
salary <- read_csv("E:/R_codes/others/nba/NBA_season1718_salary.csv")
Seasons <- read_csv("E:/R_codes/others/nba/Seasons_Stats.csv")
#Seasons <- Seasons %>%
# drop_na(Age,Player)
salary <- sqldf(
"ALTER TABLE salary ;
ADD salary17_18 FLOAT;
",row.names=T)
#UPDATE salary SET salary17_18 = season17_18/1000000
#SELECT * FROM salary
#UPDATE salary SET salary17_18 = season17_18/1000000
sqldf(
"ALTER TABLE salary
ADD salary17_18 FLOAT;
",row.names=T)
#UPDATE salary SET salary17_18 = season17_18/1000000
#SELECT * FROM salary
#UPDATE salary SET salary17_18 = season17_18/1000000
rnorm(100) %>%
matrix(ncol = 2) %>%
plot() %>%
str()
library(dplyr)
`%>%` <- magrittr::`%>%`
rnorm(100) %>%
matrix(ncol = 2) %>%
plot() %>%
str()
rnorm(100) %>%
matrix(ncol = 2) %>%
plot() %T>%
str()
library(magrittr)
rnorm(100) %>%
matrix(ncol = 2) %>%
plot() %T>%
str()
rnorm(100) %>%
+ matrix(ncol = 2) %>%
+ plot() %T>%
+ str()
rnorm(100) %>%
matrix(ncol = 2) %>%
plot() %T>%
str()
library(magrittr)
rnorm(100) %>%
matrix(ncol = 2) %T>%
plot() %>%
str()
rnorm(100) %>%
matrix(ncol = 2) %>%
plot() %>%
str()
rnorm(100) %>%
matrix(ncol = 2) %T>%
plot() %>%
str()
View(`%>%`)
rnorm(100) %>% matrix(ncol = 2)
matrix(rnorm(100),ncol = 2)
?geom_abline
??geom_abline
??data_grid
library(glmnet)
?glmnet
library(haven)
library(ggplot2)
library(dplyr)
library(rpart)
library(rpart.plot)
library(pROC)
library(tidyr)
library(randomForest)
library(missForest)
`%>%` <- magrittr::`%>%`
library(mice)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
y_train <- ceps %>%
select(sdtotal) %>%
unlist() %>%
as.numeric()
lasso_mod <-  glmnet(x_train,
y_train,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=F,ylab='系数')
lasso_mod
coef(lasso_mod)
cof <- coef(lasso_mod)
View(cof)
cof@p
coef(lasso_mod,s=0.1)
coef(lasso_mod,s=1)
coef(lasso_mod,s=0.001)
?coef
?cv.glmnet
cvfit <- cv.glmnet(x_train,
y_train,
alpha = 1)
cvfit
plot(cvfit)
cvfit$lambda.min
cvfit$lambda.1se
#options(na.action="na.fail")
library(glmnet)
?glmnet
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
library(haven)
library(ggplot2)
library(dplyr)
library(rpart)
library(rpart.plot)
library(pROC)
library(tidyr)
library(randomForest)
library(missForest)
`%>%` <- magrittr::`%>%`
library(mice)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
library(glmnet)
as.matrix(ceps)
cepsmat <- ceps %>%
select(sdtotal,schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
View(cepsmat)
y_train <- cepsmat %>%
select(sdtotal) %>%
unlist() %>%
as.numeric()
y_train <- cepsmat %>%
select(sdtotal)
sdtotal <- cepsmat$sdtotal
sdtotal <- as.matrix(ceps$sdtotal)
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=F,ylab='系数')
lasso_mod
cof <- coef(lasso_mod)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
rm(list=ls())
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
library(haven)
library(ggplot2)
library(dplyr)
library(rpart)
library(rpart.plot)
library(pROC)
library(tidyr)
library(randomForest)
library(missForest)
`%>%` <- magrittr::`%>%`
library(mice)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(schids,sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
？glmnet
?glmnet
cepsmat <- ceps %>%
select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
#x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
cepsmat <- ceps %>%
select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
lasso_mod <- glmnet(cepsmat,
ceps$sdtotal,
alpha = 1)
plot(lasso_mod,xvar="lambda",label=T,ylab='系数')
lbs_fun <- function(fit, ...) {
L <- length(fit$lambda)
x <- log(fit$lambda[L])
y <- fit$beta[, L]
labs <- names(y)
text(x, y, labels=labs, ...)
}
lbs_fun(lasso_mod)
plot(lasso_mod,xvar="lambda",label=F,ylab='系数')
lbs_fun(lasso_mod)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod)
install.packages('plotmo')
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod)
? plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
cepsmat <- ceps %>%
select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix()
lasso_mod <- glmnet(cepsmat,
ceps$sdtotal,
alpha = 1)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
cepsmat <- ceps %>%
select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
as.matrix() %>%
na.omit()
#sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(cepsmat,
ceps$sdtotal,
alpha = 1)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
lasso_mod <- glmnet(cepsmat,
na.omit(ceps$sdtotal),
alpha = 1)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)
y_train <- x_train[,1]
x_train <- x_train[,-1]
lasso_mod <- glmnet(x_train,
y_train,
alpha = 1)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
library(readr)
ceps <- read_csv("C:/Users/xsong/Desktop/table/ceps.imputed.csv")
ceps <- ceps %>%
select(sdtotal,everything()) %>%
na.omit()
#options(na.action="na.fail")
library(glmnet)
x_train <- model.matrix(sdtotal ~ schids + sex + onechi +  maedu +  faedu + drunk + qurel + relation +  desk + net + dialect + chkhmwk + chkcouse + classtm + clpre + revitm + subject + know + drsmok + commhr + schtype + schcsrm +  comno +  bknum + buget + eduqua + fight + brkpb + smok +  drink +  teainc + money + clfee + qianzi + lifetm +  dial +  chidia +  futcfd +  huko + eduy +  dangy + houspro,ceps)[,-1]
y_train <- ceps %>%
select(sdtotal) %>%
unlist() %>%
as.numeric()
#cepsmat <- ceps %>%
# select(sex,onechi,maedu,faedu, drunk,qurel,relation,desk,net,dialect,chkhmwk, chkcouse , classtm,clpre,revitm,subject,know, drsmok,commhr,schtype,schcsrm,comno,bknum, buget,eduqua,fight,brkpb,smok,drink, teainc,money,clfee,qianzi,lifetm,dial,chidia,futcfd,huko,eduy,dangy,houspro) %>%
#  as.matrix() %>%
#  na.omit()
#sdtotal <- as.matrix(ceps$sdtotal)
lasso_mod <- glmnet(x_train,
y_train,
alpha = 1)
library(plotmo) # for plot_glmnet
plot_glmnet(lasso_mod,xvar='lambda',label=T)
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
blogdown:::stop_server()
blogdown:::stop_server()
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
blogdown:::stop_server()
blogdown:::stop_server()
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
