theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
install.packages()
install.packages('hexbin')
library(hexbin)
shots %>%
ggplot() +
geom_hex(aes(lon,lat))+
labs(title="Shot type") +
ylim(c(33.7, 34.0883)) +
theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
library(hexbin)
shots %>%
ggplot() +
geom_hex(aes(lon,lat, alpha = 0.7))+
labs(title="Shot type") +
ylim(c(33.7, 34.0883)) +
theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
library(hexbin)
shots %>%
ggplot() +
geom_hex(aes(lon,lat), alpha = 0.7)+
labs(title="Shot type") +
ylim(c(33.7, 34.0883)) +
theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
library(hexbin)
shots %>%
ggplot() +
geom_hex(aes(lon,lat), alpha = 0.7)+
scale_fill_gradientn(col=c("yellow","orange","red")) +
labs(title="Shot type") +
ylim(c(33.7, 34.0883)) +
theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
library(hexbin)
shots %>%
ggplot() +
geom_hex(aes(lon,lat), alpha = 0.7)+
scale_fill_gradientn(colors=c("yellow","orange","red")) +
labs(title="Shot type") +
ylim(c(33.7, 34.0883)) +
theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
?geom_hex
library(hexbin)
shots %>%
ggplot() +
geom_hex(aes(lon,lat),
alpha = 0.7,bins = 10)+
scale_fill_gradientn(colors=c("yellow","orange","red")) +
labs(title="Shot type") +
ylim(c(33.7, 34.0883)) +
theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
library(hexbin)
shots %>%
ggplot() +
geom_hex(aes(lon,lat),
alpha = 0.7,bins = 50)+
scale_fill_gradientn(colors=c("yellow","orange","red")) +
labs(title="Shot type") +
ylim(c(33.7, 34.0883)) +
theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
library(hexbin)
shots %>%
ggplot() +
geom_hex(data = shots %>% filter(combined_shot_type=="Jump Shot"),aes(lon,lat),
alpha = 0.7,bins = 50)+
scale_fill_gradientn(colors=c("yellow","orange","red")) +
labs(title="Shot type") +
ylim(c(33.7, 34.0883)) +
theme_void() +
theme(legend.title=element_blank(),
plot.title=element_text(hjust=0.5))
library('e1071')
install.packages('e1701')
library(e1701)
?e1701
??e1701
install.packages('e1701')
install.packages('e1701')
install.packages('e1701',repos='http://cran.us.r-project.org')
install.packages('e1701',repos='http://cran.us.r-project.org')
install.packages('e1701',repos='http://cran.us.r-project.org')
install.packages('e1701',repos='http://cran.us.r-project.org')
install.packages('e1701')
library(e1701)
library(MASS)
x = rf(500,30,30)
boxa <- ggplot(as.data.frame(x),aes(x))+
geom_histogram(color='black',
fill='white')
result = boxcox(x~1,lambda = seq(-0.5,0,5))
mylambda = result$x[which.max(result$y)]
mylambda
x2 <- (x^mylambda-1)/mylambda
x2 = as.data.frame(x2)
boxb <- ggplot(x2,aes(x2)) +
geom_histogram(color='black',
fill='white')
?boxcox
library(MASS)
x = rf(500,30,30)
boxa <- ggplot(as.data.frame(x),aes(x))+
geom_histogram(color='black',
fill='white')
result = boxcox(x~1,lambda = seq(-0.5,0,5) plotit = F)
library(MASS)
x = rf(500,30,30)
boxa <- ggplot(as.data.frame(x),aes(x))+
geom_histogram(color='black',
fill='white')
result = boxcox(x~1,lambda = seq(-0.5,0,5), plotit = F)
mylambda = result$x[which.max(result$y)]
mylambda
x2 <- (x^mylambda-1)/mylambda
x2 = as.data.frame(x2)
boxb <- ggplot(x2,aes(x2)) +
geom_histogram(color='black',
fill='white')
library(MASS)
x = rf(500,30,30)
boxa <- ggplot(as.data.frame(x),aes(x))+
geom_histogram(color='black',
fill='white')
result = boxcox(x~1,lambda = seq(-0.5,0,5),
plotit = F)
mylambda = result$x[which.max(result$y)]
mylambda
x2 <- (x^mylambda-1)/mylambda
x2 = as.data.frame(x2)
ggplot(x2,aes(x2)) +
geom_density(data=as.data.frame(x),
aes(x))+
geom_density(data=as.data.frame(x2),
aes(x2))
ggplot(x2,aes(x2)) +
geom_density(data=as.data.frame(x),
aes(x),fill='purple')+
geom_density(data=as.data.frame(x2),
aes(x2),fill='green')
ggplot(x2,aes(x2)) +
geom_density(data=as.data.frame(x),
aes(x),fill='purple',
alpha=1/5)+
geom_density(data=as.data.frame(x2),
aes(x2),fill='green',
alpha=1/5)
ggplot(x2,aes(x2)) +
geom_density(data=as.data.frame(x),
aes(x),fill='purple',
col='purple',alpha=1/5)+
geom_density(data=as.data.frame(x2),
aes(x2),fill='green',
col='green',alpha=1/5)
ggplot(x2,aes(x2)) +
geom_density(data=as.data.frame(x),
aes(x),fill='purple',
col='purple',alpha=1/5)+
geom_density(data=as.data.frame(x2),
aes(x2),fill='green',
col='green',alpha=1/5)+
labs(x='')
library(glmnet)
?glmnet
x=matrix(rnorm(100*20),100,20)
y=rnorm(100)
fit1=glmnet(x,y)
print(fit1)
coef(fit1,s=0.01) # extract coefficients at a single value of lambda
predict(fit1,newx=x[1:10,],s=c(0.01,0.005)) # make predictions
#multivariate gaussian
y=matrix(rnorm(100*3),100,3)
fit1m=glmnet(x,y,family="mgaussian")
plot(fit1m,type.coef="2norm")
plot(fit1m,type.coef="lambda")
plot(fit1m,type.coef="coef")
x=matrix(rnorm(100*20),100,20)
y=rnorm(100)
g2=sample(1:2,100,replace=TRUE)
g4=sample(1:4,100,replace=TRUE)
fit1=glmnet(x,y)
plot(fit1)
plot(fit1,xvar="lambda",label=TRUE)
plot(fit1m,xvar="lambda",label=TRUE)
y=matrix(rnorm(100*3),100,3)
y
x=matrix(rnorm(100*20),100,20)
y=rnorm(100)
y
x
library(glmnet)
x=matrix(rnorm(100*20),100,20)
y=rnorm(100)
fit1=glmnet(x,y)
plot(fit1,xvar="lambda",label=TRUE)
library(glmnet)
x=matrix(rnorm(100*20),100,20)
y=rnorm(100)
fit1=glmnet(x,y)
plot(fit1,xvar="lambda",label=T)
lasso.coef <- predict(fit1,type='coefficients')[1:55 ,]
fit1
lasso.coef <- predict(fit1,type='coefficients',s=0.0656100)
lasso.coef
coeffin <- lasso.coef %>%
as.data.frame() %>%
rename('lasso.coef'='.') %>%
mutate(name=rownames(.)) %>%
filter(lasso.coef<20)
library(magrittr)
coeffin <- lasso.coef %>%
as.data.frame() %>%
rename('lasso.coef'='.') %>%
mutate(name=rownames(.)) %>%
filter(lasso.coef<20)
coeffin <- lasso.coef %>% as.data.frame()
lasso.coef
lasso.coef <- predict(fit1,type='coefficients',s=0.0656100)[1:20 ,]
lasso.coef
coeffin <- lasso.coef %>%
as.data.frame() %>%
rename('lasso.coef'='.') %>%
mutate(name=rownames(.)) %>%
filter(lasso.coef<20)
library(dplyr)
coeffin <- lasso.coef %>%
as.data.frame() %>%
rename('lasso.coef'='.') %>%
mutate(name=rownames(.)) %>%
filter(lasso.coef<20)
coeffin
ggplot(coeffin,aes(reorder(name,lasso.coef),
lasso.coef)) +
geom_point(size=1.5, color='red')+
coord_flip()+
labs(x='变量',y='LASSO回归系数') +
theme_bw()
library(ggplot2)
ggplot(coeffin,aes(reorder(name,lasso.coef),
lasso.coef)) +
geom_point(size=1.5, color='red')+
coord_flip()+
labs(x='变量',y='LASSO回归系数') +
theme_bw()
library(glmnet)
library(dplyr)
library(magrittr)
library(ggplot2)
x <- matrix(rnorm(100*20),100,20) # 自变量矩阵
y <- rnorm(100) #因变量矩阵
fit1 <- glmnet(x,y) # LASSO拟合
plot(fit1,xvar="lambda",label=T) # 回归系数随惩罚项收缩图
lasso.coef <- predict(fit1,type='coefficients',s=0.0656100)[1:20 ,] #提取特定lambda值的模型系数
coeffin <- lasso.coef %>%  # 整理数据
as.data.frame() %>%
rename('lasso.coef'='.') %>%
mutate(name=rownames(.)) %>%
filter(lasso.coef<20)
ggplot(coeffin,aes(reorder(name,lasso.coef), # 画出每个变量的系数
lasso.coef)) +
geom_point(size=1.5, color='red')+
coord_flip()+
labs(x='变量',y='LASSO回归系数') +
theme_bw()
library(xgboost)
?xgboost
ceps <- read_csv("C:/Users/xsong/Desktop/table/cepsNA.csv")
library(haven)
library(ggplot2)
library(dplyr)
library(tidyr)
library(mice)
library(readr)
library(cowplot)
`%>%` <- magrittr::`%>%`
ceps <- read_csv("C:/Users/xsong/Desktop/table/cepsNA.csv")
missing.values <- ceps %>%
gather(key = "key", value = "val") %>%
mutate(isna = is.na(val)) %>%
group_by(key) %>%
mutate(total = n()) %>%
group_by(key, total, isna) %>%
summarise(num.isna = n()) %>%
mutate(pct = num.isna / total * 100)
ceps <- read_csv("C:/Users/xsong/Desktop/table/cepsNA.csv")
missing <- ceps %>%
gather(key = "key", value = "val") %>%
mutate(isna = is.na(val)) %>%
group_by(key) %>%
mutate(total = n()) %>%
group_by(key, total, isna) %>%
summarise(num.isna = n()) %>%
mutate(pct = num.isna / total * 100)
levels <- (missing %>% filter(isna == T) %>% arrange(pct))$key
ggplot(missing) +
geom_point(aes(reorder(key,pct),
pct,fill=pct),
stat = 'identity',size=0.5,color='grey') +
scale_x_discrete(limits = levels) +
scale_fill_manual(name = "",values = c('white','tomato'), labels = c("非缺失值", "缺失值")) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ggplot(missing) +
geom_point(aes(reorder(key,pct),
pct,fill=pct),
stat = 'identity',size=0.5,color='grey')
ggplot(missing) +
geom_point(aes(reorder(key,pct),
pct,fill=pct),
stat = 'identity',size=0.5)
ggplot(missing) +
geom_point(aes(reorder(key,pct),
pct,fill=pct),
stat = 'identity',size=0.5) +
coord_flip()
ceps <- read_csv("C:/Users/xsong/Desktop/table/cepsNA.csv")
missing.values <- ceps %>%
gather(key = "key", value = "val") %>%
mutate(isna = is.na(val)) %>%
group_by(key) %>%
mutate(total = n()) %>%
group_by(key, total, isna) %>%
summarise(num.isna = n()) %>%
mutate(pct = num.isna / total * 100)
levels <- (missing.values %>% filter(isna == T) %>% arrange(pct))$key
ggplot(missing.values) +
geom_bar(aes(reorder(key,pct),
pct,fill=isna),
stat = 'identity',size=0.5,color='grey') +
scale_x_discrete(limits = levels) +
scale_fill_manual(name = "",values = c('white','tomato'), labels = c("非缺失值", "缺失值")) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ggplot(missing.values) +
geom_point(aes(reorder(key,pct),pct),color='grey')
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ggplot(missing.values) +
geom_point(aes(reorder(key,pct),pct),color='grey') +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ggplot(missing.values) +
geom_bar(aes(reorder(key,pct),
pct,fill=isna),
stat = 'identity',size=0.5,color='grey') +
scale_x_discrete(limits = levels) +
scale_fill_manual(name = "",values = c('white','tomato'), labels = c("非缺失值", "缺失值")) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ggplot(missing.values) +
geom_point(aes(reorder(key,pct),pct),color='grey') +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ggplot(missing.values) +
geom_point(aes(reorder(key,pct),pct),color='grey') +
scale_x_discrete(limits = levels) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
levels
missing.values
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),pct),color='grey') +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ggplot(missing.values) +
geom_bar(aes(reorder(key,pct),
pct,fill=isna),
stat = 'identity',size=0.5,color='grey') +
scale_x_discrete(limits = levels) +
scale_fill_manual(name = "",values = c('white','tomato'), labels = c("非缺失值", "缺失值")) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),pct),color='grey') +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),pct),color=pct) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),pct),fill=pct) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),pct)) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),pct,fill=pct)) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),pct,col=pct)) +
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
?scale_colour_viridis_d
ceps <- read_csv("C:/Users/xsong/Desktop/table/cepsNA.csv")
missing.values <- ceps %>%
gather(key = "key", value = "val") %>%
mutate(isna = is.na(val)) %>%
group_by(key) %>%
mutate(total = n()) %>%
group_by(key, total, isna) %>%
summarise(num.isna = n()) %>%
mutate(pct = num.isna / total * 100) %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),
pct,col=pct)) +
scale_colour_viridis_c()+
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ceps <- read_csv("C:/Users/xsong/Desktop/table/cepsNA.csv")
missing.values <- ceps %>%
gather(key = "key", value = "val") %>%
mutate(isna = is.na(val)) %>%
group_by(key) %>%
mutate(total = n()) %>%
group_by(key, total, isna) %>%
summarise(num.isna = n()) %>%
mutate(pct = num.isna / total * 100) %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),
pct,col=pct)) +
scale_colour_viridis_c()+
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ceps <- read_csv("C:/Users/xsong/Desktop/table/cepsNA.csv")
missing.values <- ceps %>%
gather(key = "key", value = "val") %>%
mutate(isna = is.na(val)) %>%
group_by(key) %>%
mutate(total = n()) %>%
group_by(key, total, isna) %>%
summarise(num.isna = n()) %>%
mutate(pct = num.isna / total * 100)
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),
pct,col=pct)) +
scale_colour_viridis_c()+
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
ceps <- read_csv("C:/Users/xsong/Desktop/table/cepsNA.csv")
missing.values <- ceps %>%
gather(key = "key", value = "val") %>%
mutate(isna = is.na(val)) %>%
group_by(key) %>%
mutate(total = n()) %>%
group_by(key, total, isna) %>%
summarise(num.isna = n()) %>%
mutate(pct = num.isna / total * 100)
missing.values %>%
filter(isna == T) %>%
ggplot() +
geom_point(aes(reorder(key,pct),
pct,col=pct)) +
scale_colour_viridis_c(guide =F)+
coord_flip() +
labs(x ='变量', y = "%")+
theme_bw()
setwd('F:\\Mysite\\Mysite')
blogdown:::serve_site()
blogdown:::stop_server()
