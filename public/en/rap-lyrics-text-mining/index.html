<!DOCTYPE html>
<html lang="en-us">
  <head>
    <base target="_blank">
    <meta name="baidu-site-verification" content="XQ7m1PA0VK" />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.55.5" />


<title>Rap Lyrics Text Mining - Xiao Song</title>
<meta property="og:title" content="Rap Lyrics Text Mining - Xiao Song">


  <link href='../../favicon.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="../../css/fonts.css" media="all">
<link rel="stylesheet" href="../../css/main.css" media="all">



  </head>
  <body>
    <div class="fixed-top">
      <header class="header">
        <nav class="nav">
  <a href="../../" class="nav-logo">
    <img src="../../images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="../../en">Home</a></li>
    
    <li><a href="../../en/enresume/">Vitae</a></li>
    
    <li><a href="../../zh">Chinese</a></li>
    
  </ul>
</nav>
      </header>

<link rel="stylesheet">

<main class="content" role="main">

  <article class="article">

    <h1 class="article-title">Rap Lyrics Text Mining</h1>

    
    <span class="article-date">2019-12-27</span>
    

    <div class="article-content">
      


<p><a href="https://www.kaggle.com/rikdifos/rap-lyrics-text-ming">A Kaggle Version</a></p>
<p><a href="https://www.kaggle.com/rikdifos/rap-lyrics-text-ming">A website Version</a></p>
<p>As a rap listener and a data analyst, I’m willing to combine my hobbies. Until I found suitable data, I could achieve it.</p>
<p>I found a github <a href="https://github.com/fpaupier/RapLyrics-Scraper">repo</a> contains famous rappers’ lyrics, shout out to the author. I know and listened 90% of them. They are all widely accepted greatest rappers. Notice that those lyrics mostly are relatively old rappers, and you could go to figure <a href="#fig:list">5</a> to check full rappers list.</p>
<p>I use R because it could easily do nice data visualization. However, Python has better features for Machine Learning. Since our dataset has no label for Classification. This dataset will be only used to do some basic analysis and text metrics.</p>
<p><img src="https://i.loli.net/2019/12/24/LewKQVYmCWlqox3.gif" width="70%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>`%&gt;%` &lt;- magrittr::`%&gt;%`
library(readr)
library(ggplot2)
library(dplyr)
library(purrr)
library(stringr)
library(tidytext)
library(dplyr)</code></pre>
<pre class="r"><code>#../input/rap-lyrics-from-36-rappers/rap_all.csv
rap &lt;- read_csv(&quot;E:/RapLyrics/lyrics_US/rap_all.csv&quot;)</code></pre>
<pre class="r"><code># remove non-english
rap$text &lt;- lapply(rap$text, iconv, &quot;UTF-8&quot;, &quot;ASCII&quot;, sub=&quot;&quot;)

rap1 &lt;- rap %&gt;%
  unnest_tokens(word,text) %&gt;% 
  anti_join(stop_words) %&gt;% 
  mutate(word = SnowballC::wordStem(word)) %&gt;% 
  filter(!str_detect(word, &quot;^[0-9]*$&quot;)) %&gt;%
  filter(str_detect(word, &quot;^[a-z]+$&quot;)) # match only english alphabet

wdf &lt;- rap1 %&gt;%
  group_by(rapper) %&gt;% 
  count(word, sort = T) %&gt;% 
  mutate(word = reorder(word, n),
         word=as.character(word)) %&gt;% 
  filter(word!=&#39;na&#39;) 
wdf</code></pre>
<pre><code># A tibble: 108,957 x 3
# Groups:   rapper [36]
   rapper            word      n
   &lt;chr&gt;             &lt;chr&gt; &lt;int&gt;
 1 Tyler The Creator fuck    726
 2 Montana of 300    nigga   629
 3 Montana of 300    bitch   482
 4 A$AP Rocky        nigga   461
 5 the_notorious_big nigga   440
 6 Deniro Farrar     nigga   413
 7 Tyler The Creator nigga   387
 8 J Cole            nigga   366
 9 Royce Da 59       nigga   355
10 Big L             nigga   326
# ... with 108,947 more rows</code></pre>
<pre class="r"><code>library(wordcloud)
rap1 %&gt;%
  count(word) %&gt;%
  filter(word!=&#39;na&#39;,word!=&#39;00a0&#39;) %&gt;% 
  with(wordcloud(word, n, max.words = 100))</code></pre>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-6"></span>
<img src="../../post/rap.en_files/figure-html/unnamed-chunk-6-1.png" alt="Word Cloud" width="90%" />
<p class="caption">
Figure 1: Word Cloud
</p>
</div>
<p>Wow! Rappers really love N-words and F-words. Don’t feel shocked, If you go deeper, this is very common in rap songs.</p>
<p>Furthermore, We could analysis sentiment of those words. I plot them into different colors. Although these lyrics contians a lot of negative words, rappers still want to show love &amp; peace to the world.</p>
<pre class="r"><code>library(reshape2)

rap1 %&gt;%
  inner_join(get_sentiments(&quot;bing&quot;)) %&gt;% # use bing sentiment lexicon
  count(word, sentiment, sort = T) %&gt;%
  acast(word ~ sentiment, value.var = &quot;n&quot;, fill = 0) %&gt;%
  comparison.cloud(colors = c(&quot;blue&quot;, &quot;red&quot;),max.words = 100)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-7"></span>
<img src="../../post/rap.en_files/figure-html/unnamed-chunk-7-1.png" alt="Word Cloud by sentiment" width="90%" />
<p class="caption">
Figure 2: Word Cloud by sentiment
</p>
</div>
<p>Now we test Zipf’s Law, which indicates that a terms’ frequencies are inversely proportional to their ranks. E.g., If rappers love to use <em>Nxgga</em> mostly, the term frequency of secondly used word <em>Fxxk</em> will be half of <em>Nxgga</em>.</p>
<p>Now we plot it and use eye-ball test. Every color means a rapper’s words of lyrics. Figure <a href="#fig:zipf">3</a> shows a log-log scale of the two variables, while Figure <a href="#fig:zipff">4</a> shows origin relation between TF and rank.</p>
<pre class="r"><code>total_words &lt;- wdf %&gt;% 
  group_by(rapper) %&gt;% 
  summarize(total = sum(n))

new_words &lt;- left_join(wdf, total_words)

song_words &lt;- new_words %&gt;% 
  group_by(rapper) %&gt;% 
  mutate(rank = row_number(), 
         `term frequency` = n/total)

song_words %&gt;% 
  ggplot(aes(log10(rank), log10(`term frequency`),
             col = rapper)) + 
  geom_line(size = 1.1, alpha = 0.8,
            show.legend = F) </code></pre>
<div class="figure" style="text-align: center"><span id="fig:zipf"></span>
<img src="../../post/rap.en_files/figure-html/zipf-1.png" alt="Test Zipf's Law: log-log scale." width="90%" />
<p class="caption">
Figure 3: Test Zipf’s Law: log-log scale.
</p>
</div>
<pre class="r"><code>song_words %&gt;% 
  ggplot(aes(rank, `term frequency`,
             col = rapper)) + 
  geom_line(size = 1.1, alpha = 0.8, 
            show.legend = F) +
  xlim(0, 500) +
  ylim(0, 0.01)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:zipff"></span>
<img src="../../post/rap.en_files/figure-html/zipff-1.png" alt="Test Zipf's Law: original scale." width="90%" />
<p class="caption">
Figure 4: Test Zipf’s Law: original scale.
</p>
</div>
<p>In order to discern every rapper’s difference, I will calculate every word’s tf-idf value, which represents the importance of specific word for a rapper. E.g., <em>Yeezy</em> for Kanye West; <em>Slim Shady</em> for Eminem. Attention that featuring songs (Working with other rappers) might bring some noise to this dataset. For instance, <em>Runaway</em> is a Kanye West’s song features Push-T, who contributes a verse to the song. Nevertheless, this song belongs to Kanye completely in the dataset.</p>
<p>Now see the result:</p>
<pre class="r"><code>totalword &lt;- wdf %&gt;% 
  group_by(rapper) %&gt;% 
  summarize(total = sum(n))

book_words &lt;- left_join(wdf, totalword)
totalword</code></pre>
<pre><code># A tibble: 36 x 2
   rapper              total
   &lt;chr&gt;               &lt;int&gt;
 1 A$AP Ant             3747
 2 A$AP Rocky          12098
 3 Action Bronson       7496
 4 &quot;Andr\xa8\xa6 3000&quot;  1142
 5 Bas                  7001
 6 Big L               15752
 7 Chance The Rapper   10844
 8 Childish Gambino    13645
 9 Common              11975
10 CunninLynguists      9618
# ... with 26 more rows</code></pre>
<pre class="r"><code>book_words &lt;- book_words %&gt;%
  bind_tf_idf(word,rapper, n)

book_words</code></pre>
<pre><code># A tibble: 108,957 x 7
# Groups:   rapper [36]
   rapper            word      n total     tf    idf   tf_idf
   &lt;chr&gt;             &lt;chr&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
 1 Tyler The Creator fuck    726 14908 0.0487 0.0572 0.00278 
 2 Montana of 300    nigga   629 18510 0.0340 0.0282 0.000957
 3 Montana of 300    bitch   482 18510 0.0260 0.0572 0.00149 
 4 A$AP Rocky        nigga   461 12098 0.0381 0.0282 0.00107 
 5 the_notorious_big nigga   440 15618 0.0282 0.0282 0.000794
 6 Deniro Farrar     nigga   413  7089 0.0583 0.0282 0.00164 
 7 Tyler The Creator nigga   387 14908 0.0260 0.0282 0.000731
 8 J Cole            nigga   366  9440 0.0388 0.0282 0.00109 
 9 Royce Da 59       nigga   355 17105 0.0208 0.0282 0.000585
10 Big L             nigga   326 15752 0.0207 0.0282 0.000583
# ... with 108,947 more rows</code></pre>
<pre class="r"><code>book_words %&gt;%
  mutate(word = factor(word,
                       levels = rev(unique(word)))) %&gt;% 
  group_by(rapper) %&gt;% 
  top_n(15) %&gt;% 
  ungroup() %&gt;%
  ggplot(aes(reorder(word,tf_idf), 
             tf_idf, fill = rapper)) +
  geom_col(show.legend = F) +
  labs(x = NULL, y = &quot;tf-idf&quot;) +
  facet_wrap(~rapper, ncol = 3, scales = &quot;free&quot;) +
  coord_flip()</code></pre>
<div class="figure" style="text-align: center"><span id="fig:list"></span>
<img src="../../post/rap.en_files/figure-html/list-1.png" alt="Tf-Idf value and Top words for every rapper" width="90%" />
<p class="caption">
Figure 5: Tf-Idf value and Top words for every rapper
</p>
</div>
<p>Famous rappers always have their own slang, like . Like Lil Wayne also known as <em>Weezy</em> or <em>Carter</em>. Similarly, The Notorious B.I.G call himself <em>Biggie Smalls</em>, or <em>Big Poppa</em>. It could be seen from figure <a href="#fig:list">5</a></p>
<blockquote>
<p>I love it when you call me big poppa</p>
</blockquote>
<p>R.I.P Biggie!</p>
<p>We could see that some vocabularies are ended by <em>i</em>, for example, <em>reply</em> will be converted to <em>repli</em> by <code>SnowballC::wordStem</code>.</p>
<pre class="r"><code>SnowballC::wordStem(&#39;reply&#39;,language = &quot;eng&quot;)</code></pre>
<pre><code>[1] &quot;repli&quot;</code></pre>
<p>I don’t know why it appears that, could someone explain it?</p>

    </div>
  </article>

  
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//Xiao Song.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


<div id="disqus_thread"></div>
<script>





(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://xiao-song.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
 



</main>

  <center>
   <script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=1660be&w=180&t=n&d=bLbRVCl6hpPrG3ydeBPnss5Icv_ZJXbokniqNe34m4M&co=f1f3ec&ct=808080&cmo=3acc3a&cmn=ff5353'></script>
  </center>

<footer class="footer">
        <ul class="footer-links">
            <a href="https://github.com/ECSTA7Y" class="footer-links-kudos"> <img src="../../images/git.svg" alt=" " width="15" height="15"></a>
            <a href="https://www.linkedin.com/in/xiao-song-a1ab5318b/" class="footer-links-kudos"> <img src="../../images/linkedin.svg" alt=" " width="15" height="15"></a>
            <a href="https://www.kaggle.com/rikdifos" class="footer-links-kudos"> <img src="../../images/kaggle.png" alt=" " width="15.2" height="14.5"></a>
            <a href="../../archives/subscribe" class="footer-links-kudos"> <img src="../../images/rss.svg" alt=" " width="14.5" height="15"></a>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="../../js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-144652310-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </body>
</html>